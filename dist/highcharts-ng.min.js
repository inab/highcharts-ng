/**
 * highcharts-ng
 * @version v0.0.12-dev - 2016-04-03
 * @link https://github.com/pablojim/highcharts-ng
 * @author Barry Fitzgerald <>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="highcharts-ng"),function(){"use strict";function a(){var a=[],c=!1,d=!1;return{HIGHCHART:"highcharts.js",HIGHSTOCK:"stock/highstock.js",basePath:function(a){c=a},lazyLoad:function(b){a=void 0===b?[this.HIGHCHART]:b,d=!0},$get:["$window","$rootScope",function(e,f){return c||(c=("https:"===window.location.protocol?"https":"http")+"://code.highcharts.com/"),b(e,f,d,c,a)}]}}function b(a,b,c,d,e){var f=[],g=!1;return{lazyLoad:c,ready:function(d,h){if("undefined"==typeof a.Highcharts&&c){if(f.push([d,h]),g)return;g=!0;var i=this;"undefined"==typeof jQuery&&e.unshift("adapters/standalone-framework.js");var j=function(){if(0===e.length)g=!1,b.$apply(function(){angular.forEach(f,function(a){a[0].apply(a[1],[])})});else{var a=e.shift();i.loadScript(a,j)}};j()}else d()},loadScript:function(a,b){var c=document.createElement("script");c.type="text/javascript",c.src=d+a,c.onload=b,document.getElementsByTagName("body")[0].appendChild(c)},indexOf:function(a,b,c){void 0===c&&(c=0),0>c&&(c+=a.length),0>c&&(c=0);for(var d=a.length;d>c;c++)if(c in a&&a[c]===b)return c;return-1},prependMethod:function(a,b,c){var d=a[b];a[b]=function(){var a=Array.prototype.slice.call(arguments);return c.apply(this,a),d?d.apply(this,a):void 0}},deepExtend:function h(a,b){if(angular.isArray(b)){a=angular.isArray(a)?a:[];for(var c=0;c<b.length;c++)a[c]=h(a[c]||{},b[c])}else if(angular.isObject(b)){a=angular.isObject(a)?a:{};for(var d in b)a[d]=h(a[d]||{},b[d])}else a=b;return a}}}function c(a,b){var c=0,d=function(a){var b=!1;return angular.forEach(a,function(a){angular.isDefined(a.id)||(a.id="series-"+c++,b=!0)}),b},e=["xAxis","yAxis"],f={stock:"StockChart",map:"Map",chart:"Chart"},g=function(c,d,f){var g={},h={chart:{events:{}},title:{},subtitle:{},series:[],credits:{},plotOptions:{},navigator:{enabled:!1},xAxis:{events:{}},yAxis:{events:{}}};return g=f.options?a.deepExtend(h,f.options):h,g.chart.renderTo=d[0],angular.forEach(e,function(d){angular.isDefined(f[d])&&(g[d]=a.deepExtend(g[d]||{},f[d]),(angular.isDefined(f[d].currentMin)||angular.isDefined(f[d].currentMax))&&(a.prependMethod(g.chart.events,"selection",function(a){var b=this;a[d]?c.$apply(function(){c.config[d].currentMin=a[d][0].min,c.config[d].currentMax=a[d][0].max}):c.$apply(function(){c.config[d].currentMin=b[d][0].dataMin,c.config[d].currentMax=b[d][0].dataMax})}),a.prependMethod(g.chart.events,"addSeries",function(a){c.config[d].currentMin=this[d][0].min||c.config[d].currentMin,c.config[d].currentMax=this[d][0].max||c.config[d].currentMax}),a.prependMethod(g[d].events,"setExtremes",function(a){a.trigger&&"zoom"!==a.trigger&&b(function(){c.config[d].currentMin=a.min,c.config[d].currentMax=a.max,c.config[d].min=a.min,c.config[d].max=a.max},0)})))}),f.drilldown&&(g.drilldown=f.drilldown),f.title&&(g.title=f.title),f.subtitle&&(g.subtitle=f.subtitle),f.credits&&(g.credits=f.credits),f.size&&(f.size.width&&(g.chart.width=f.size.width),f.size.height&&(g.chart.height=f.size.height)),g},h=function(a,b){var c=a.getExtremes();b.currentMin===c.dataMin&&b.currentMax===c.dataMax||(a.setExtremes?a.setExtremes(b.currentMin,b.currentMax,!1):a.detachedsetExtremes(b.currentMin,b.currentMax,!1))},i=function(a,b,c){(b.currentMin||b.currentMax)&&a[c][0].setExtremes(b.currentMin,b.currentMax,!0)},j=function(b){return angular.extend(a.deepExtend({},b),{data:null,visible:null})},k=function(a){return void 0===a.config?"Chart":f[(""+a.config.chartType).toLowerCase()]||(a.config.useHighStocks?"StockChart":"Chart")},l={restrict:"EAC",replace:!0,template:"<div></div>",scope:{config:"=",disableDataWatch:"="},link:function(c,f,l){var m={},n=!1,o=function(b,e){var f,g=[],h=!1;if(b){var i=d(b);if(i&&!c.disableDataWatch)return!1;var k={};Array.isArray(e)&&angular.forEach(e,function(a){void 0!==a.id&&null!==a.id&&(k[e.id]=a)});var l=!1;angular.forEach(b,function(a,b){g.push(a.id);var c=n.get(a.id);if(c)if(angular.equals(m[a.id],j(a))&&a.id in k){void 0!==a.visible&&c.visible!==a.visible&&c.setVisible(a.visible,!1);var d=k[a.id];if(a.data.length>=d.data.length){for(var e=0,f=d.data.length;f>e&&angular.equals(a.data[e],d.data[e]);e++);if(f>e)c.setData(a.data,!1),h=!0,l=!0;else if(a.data.length>d.data.length){for(e=d.data.length,f=a.data.length;f>e;e++)c.addPoint(a.data[e],!1);l=!0,h=!0}else a.data.length>0&&(l=!0)}else{for(var i=0,o=a.data.length;o>i&&angular.equals(a.data[i],d.data[i]);i++);if(o>i)c.setData(a.data,!1),l=!0;else{for(i=d.data.length-1,o=a.data.length;i>=o;i--)c.removePoint(i,!1);i>=0&&(l=!0)}h=!0}}else c.update(a,!1),a.data.length>0&&(l=!0);else n.addSeries(a,!1),h=!0,a.data.length>0&&(l=!0);m[a.id]=j(a)}),c.config.noData&&(l?n.hideLoading():n.showLoading(c.config.noData))}for(f=n.series.length-1;f>=0;f--){var o=n.series[f];"highcharts-navigator-series"!==o.options.id&&a.indexOf(g,o.options.id)<0&&(o.remove(!1),h=!0)}return h},p=function(){n&&n.destroy(),m={};var a=c.config||{},b=g(c,f,a),d=a.func||void 0,h=k(c);n=new Highcharts[h](b,d);for(var j=0;j<e.length;j++)a[e[j]]&&i(n,a[e[j]],e[j]);a.loading&&n.showLoading(),a.getHighcharts=function(){return n}};p(),c.$watchGroup([function(){return f[0].offsetWidth},function(){return f[0].offsetHeight}],function(a){n.reflow()});var q=!0,r=function(a){q&&a&&(q=!1,c.$evalAsync(function(){n.redraw(),q=!0}))};c.disableDataWatch?c.$watchCollection("config.series",function(a,b){var c=o(a);r(c)}):c.$watch("config.series",function(a,b){var c=o(a,b);r(c)},!0),c.$watch("config.title",function(a){n.setTitle(a,!0)},!0),c.$watch("config.subtitle",function(a){n.setTitle(!0,a)},!0),c.$watch("config.loading",function(a){a?n.showLoading(a===!0?null:a):n.hideLoading()}),c.$watch("config.noData",function(a){c.config&&c.config.loading&&n.showLoading(a)},!0),c.$watch("config.credits.enabled",function(a){a?n.credits.show():n.credits&&n.credits.hide()}),c.$watch(k,function(a,b){a!==b&&p()}),angular.forEach(e,function(a){c.$watch("config."+a,function(b,c){if(!angular.equals(b,c)){if(angular.isArray(b))for(var d=0;d<b.length;d++){var e=b[d];d<n[a].length&&(n[a][d].update(e,!1),h(n[a][d],e))}else n[a][0].update(b,!1),h(n[a][0],b);r(!0)}},!0)}),c.$watch("config.options",function(a,b,c){if(a!==b){p();var d=o(c.config.series);r(d)}},!0),c.$watch("config.size",function(a,b){a!==b&&a&&n.setSize(a.width||n.chartWidth,a.height||n.chartHeight)},!0),c.$on("highchartsng.reflow",function(){n.reflow()}),c.$on("$destroy",function(){if(n){try{n.destroy()}catch(a){}b(function(){f.remove()},0)}})}};if(a.lazyLoad){var m=l.link;l.link=function(){var b=arguments;a.ready(function(){m.apply(this,b)},this)}}return l}angular.module("highcharts-ng",[]).provider("highchartsNG",a).directive("highchart",["highchartsNG","$timeout",c])}();